javascript: (function() {
    if (typeof plxDwnld == 'undefined') {
        var jsCode = document.createElement('script');
        jsCode.text = 'var plxDwnld=function(){var e={},n=new RegExp("server/([a-f0-9]{40})/"),t=new RegExp("key=\%2\Flibrary\%2\Fmetadata\%2\F(\\\\d+)"),l=null,a=null,i=function(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&n(t.responseXML)},t.open("GET",e),t.send()},r=function(e){var r=n.exec(window.location.href);if(r&&2==r.length){var c=e.evaluate("//Device[@clientIdentifier=\'{clientid}\']/@accessToken".replace("{clientid}",r[1]),e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null),u=e.evaluate("//Device[@clientIdentifier=\'{clientid}\']/Connection[@local=0]/@uri".replace("{clientid}",r[1]),e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(c.singleNodeValue&&u.singleNodeValue){a=c.singleNodeValue.textContent,l=u.singleNodeValue.textContent;var s=t.exec(window.location.href);s&&2==s.length?i("{baseuri}/library/metadata/{id}?X-Plex-Token={token}".replace("{baseuri}",l).replace("{id}",s[1]).replace("{token}",a),o):alert("You are currently not viewing a media item.")}else alert("Cannot find a valid accessToken.")}else alert("You are currently not viewing a media item.")},o=function(e){var n=e.evaluate("//Media/Part[1]/@key",e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);n.singleNodeValue?window.location.href = "plex:{baseuri}{partkey}?download=1&X-Plex-Token={token}".replace("{baseuri}",l).replace("{partkey}",n.singleNodeValue.textContent).replace("{token}",a):alert("You are currently not viewing a media item.")};return e.init=function(){void 0!==localStorage.myPlexAccessToken?i("https://plex.tv/api/resources?includeHttps=1&X-Plex-Token={token}".replace("{token}",localStorage.myPlexAccessToken),r):alert("You are currently not browsing or logged into a Plex web environment.")},e}();plxDwnld.init();';
        document.body.appendChild(jsCode);
    } else { plxDwnld.init(); }
})()